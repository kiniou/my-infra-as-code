# Traefik automatic ssl with pebble for local web development setup

This setup will spawn a ready to use Traefik container with automatic ssl generation with the simple ACME server [Pebble](https://github.com/letsencrypt/pebble)

## Setup

1. Install files to `/etc/traefik`.
2. Run `sudo ca-pebble.sh` to generate certificates as administrator.
3. [linux only] Install and start systemd `traefik.service`.
4. You should now have a ready-to-use SSL enabled Traefik proxy.

## Trust [temporarily] Pebble CA

The following commands will import the root certifcate generated by Pebble and
will help you trust every certificates.

Since Pebble regenerate its intermediate certificate, you'll need to reimport
after a restart of the service.

### Google Chrome
```shell
DBPATH=${HOME}/.pki/nssdb
certutil -d sql:${DBPATH} -D -n "localhost-pebble"
curl -sSLk https://localhost:15000/roots/0 \
| certutil -d sql:${DBPATH} -A -n "localhost-pebble" -t CT,c,c
```

### Firefox

1. Find your local profile root directory. You should find it in
   `about:profiles` page of your running session.
2. Run the following commands:
```shell
DBPATH=${HOME}/.mozilla/firefox/<profile_id>
certutil -d sql:${DBPATH} -D -n "localhost-pebble"
curl -sSLk https://localhost:15000/roots/0 \
| certutil -d sql:${DBPATH} -A -n "localhost-pebble" -t CT,c,c
```

## Credits

- This setup is heavily inspired and borrowed from [PofMagicfingers](https://github.com/PofMagicfingers/traefik-pebble-stack)
